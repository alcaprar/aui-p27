<html>
<head>
    <title>AUI project</title>
    <meta name="description" content="Quiz">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aframe/0.7.1/aframe.js"></script>
    <script src="quiz.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.js" integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/aframe-log-component/dist/aframe-log-component.min.js"></script>
</head>
<body>
    <a-scene>
        <a-assets>
            <a-assets-item id="tv-3d-model" src="gltf/tv/scene.gltf"></a-assets-item>
            <a-assets-item id="panda" src="gltf/panda2/scene.gltf"></a-assets-item>
        </a-assets>

        <a-camera id="camera" look-controls wasd-controls position="0 0 2">
            <a-cursor position="0 0 -1" fuse="true">
            </a-cursor>
        </a-camera>



        <a-entity id="room">
            <!--left wall-->
            <a-plane id="left-wall" position="-3 1.5 0" height="3" width="6" rotation="0 -90 0" material="color: #586972; side: back"></a-plane>
            <a-box id="left-battiscopa" position="-2.97 0.08 0" height="0.16" width="6" depth="0.06" rotation="0 -90 0" material="color: white; side: double"></a-box>
            <a-log position="-1 1.5 0" scale="1 0.5 1"></a-log>

            <!--right wall-->
            <a-plane id="right-wall" position="3 1.5 0" height="3" width="6" rotation="0 90 0" material="color: #586972; side: back"></a-plane>
            <a-box id="right-battiscopa" position="2.97 0.08 0" height="0.16" width="6" depth="0.06" rotation="0 90 0" material="color: white; side: double"></a-box>

            <!--door-->
            <a-entity id="door">
                <a-box position="2.96 1 2.3" height="2" width="0.08" depth="1" material="color: #BBBBBB; side: double"></a-box>
                <a-cylinder position="2.92 1 1.95" height="0.05" radius="0.02" rotation="0 0 90" material="color: #324149; side: double"></a-cylinder>
                <a-sphere position="2.88 1 1.95" radius="0.03" material="color: #324149; side: double"></a-sphere>
            </a-entity>
            <!--front wall-->
            <a-plane id="front-wall" position="0 1.5 -3" height="3" width="6" rotation="0 0 0" material="color: #B7B7B7"></a-plane>
            <a-box id="front-battiscopa" position="0 0.08 -2.97" height="0.16" width="6" depth="0.06" rotation="0 0 0" material="color: white; side: double"></a-box>
            <a-gltf-model src="#tv-3d-model" position="1.6 1.5 -3" scale="0.03 0.03 0.03"></a-gltf-model>

            <!--back wall-->
            <a-plane id="back-wall" position="0 1.5 3" height="3" width="6" rotation="0 0 0" material="color: #B7B7B7; side: back"></a-plane>
            <a-box id="back-battiscopa" position="0 0.08 2.97" height="0.16" width="6" depth="0.06" rotation="0 0 0" material="color: white; side: double"></a-box>

            <!--ceiling-->
            <a-plane id="ceiling" position="0 3 0" height="6" width="6" rotation="-90 0 0" material="color: white; side: back"></a-plane>
            <!--floor-->
            <a-plane id="floor" height="6" width="6" rotation="-90 0 0" material="color: #FBAD4E"></a-plane>

            <!--table-->
            <a-entity id="table">
                <a-box height="0.1" width="1.4" depth="1" position="2.1 1.05 -2.35" material="color:#FBAD4E; side: double;"></a-box>
                <a-box position="1.5 0.5 -2.7" height="1" width="0.08" depth="0.08" material="color: #FFE799; side: double;"></a-box>
                <a-box position="2.7 0.5 -2.7" height="1" width="0.08" depth="0.08" material="color: #FFE799; side: double;"></a-box>

                <a-box position="1.5 0.5 -2" height="1" width="0.08" depth="0.08" material="color: #FFE799; side: double;"></a-box>
                <a-box position="2.7 0.5 -2" height="1" width="0.08" depth="0.08" material="color: #FFE799; side: double;"></a-box>
            </a-entity>

            <!--storyteller-->
            <a-gltf-model id="storyteller" src="#panda" position="2.3 0 -1.5" rotation="0 -45 0" scale="3 3 3"></a-gltf-model>
        </a-entity>
    </a-scene>
</body>

<script>
    // add a listener when vr is entered to reset camera height
    document.querySelector('a-scene').addEventListener('enter-vr', function () {
        AFRAME.log('Vr entered' + document.querySelector('#camera').getAttribute('position').y);
        var oldPosition = document.querySelector('#camera').getAttribute('position');
        var msg = new SpeechSynthesisUtterance('Altezza ' + oldPosition.y);
        msg.lang = 'it-it';
        window.speechSynthesis.speak(msg);
        // override y
        oldPosition['y'] = 1.6;
        document.querySelector('#camera').setAttribute('position', oldPosition)
    });

    var msg = new SpeechSynthesisUtterance('Ciao');
    msg.lang = 'it-it';
    window.speechSynthesis.speak(msg);
</script>
</html>